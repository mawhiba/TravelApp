var Client=function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function n(e){var t=e.match(/[a-zA-Z]+/g);return null!=t&&(console.log(t),t.length>=1)}o.r(t),o.d(t,"checkForName",(function(){return n})),o.d(t,"handleSubmit",(function(){return c}));const a=async(e,t,o)=>{const n="https://api.weatherbit.io/v2.0/forecast/daily?days="+o+"&lat="+e+"&lon="+t+"&key=a3b7825b1b094fa38bf650a9e10c84a9";console.log(n);const a=await fetch(n);try{const e=await a.json();return console.log(e),e}catch(e){console.log(e)}},r=(e,t)=>{const o=Date.parse(e),n=Date.parse(t);return Math.ceil((n-o)/864e5)},c=async e=>{e.preventDefault();let t=document.getElementById("name").value;t=t.charAt(0).toUpperCase()+t.slice(1);const o=document.getElementById("from").value,n=document.getElementById("to").value;let c={};if(Client.checkForName(t))try{c=await(async e=>{const t="http://api.geonames.org/searchJSON?formatted=true&q="+e+"&username=maj89";console.log(t);const o={},n=await fetch(t);try{const e=await n.json();return console.log(e),o.latitude=e.geonames[0].lat,o.longitude=e.geonames[0].lng,o.countryName=e.geonames[0].countryName,console.log(o),o}catch(e){console.log(e)}})(t);const e=r(o,n),l=new Date,i=r(l,o);if(i<=7){const e=await a(c.latitude,c.longitude,1);console.log(e),c.weatherDescription=e.data[0].weather.description,c.highTemp=e.data[0].high_temp,c.lowTemp=e.data[0].low_temp,console.log(c)}else{const e=await a(c.latitude,c.longitude,i);console.log(e),c.weatherDescription=e.data[0].weather.description,c.highTemp=e.data[0].high_temp,c.lowTemp=e.data[0].low_temp,console.log(c)}const s=await(async(e,t)=>{const o="19902110-9401cc6104f56ea687a53c5df";let n="https://pixabay.com/api/?key="+o+"&q="+e+"&image_type=photo&category=places";try{let e=await fetch(n),a=await e.json();return 0==a.hits&&(n="https://pixabay.com/api/?key="+o+"&q="+t+"&image_type=photo&category=places",e=await fetch(n),a=await e.json()),console.log(a),a}catch(e){console.log(e)}})(t,c.countryName);c.image=s.hits[0].webformatURL,console.log("Location object : "+JSON.stringify(c)),(async(e="",t={})=>{console.log("hello from postData"),console.log(t);const o=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log("After fetching");try{const e=await o.json();console.log("trip data"),console.log(e)}catch(e){console.log("error",e)}})("http://localhost:8081/postInfo",c);let u=document.getElementById("city_image");u.setAttribute("src",c.image),u.setAttribute("width","200"),u.setAttribute("height","200"),document.getElementById("title").innerHTML="Your trip to: "+t+", "+c.countryName,document.getElementById("departing").innerHTML="Departing: "+o,document.getElementById("tripDuration").innerHTML="Trip duration: "+e,document.getElementById("text").style.display="block",document.getElementById("temp").innerHTML="High "+c.highTemp+",  Low "+c.lowTemp,document.getElementById("weather_desc").innerHTML=c.weatherDescription}catch(e){alert("Sorry. There was an error in submitting your input\n"+e)}else alert("Please enter a city name")};console.log(n),console.log("CHANGE!!"),document.getElementById("handleSubmit").addEventListener("click",c)}]);